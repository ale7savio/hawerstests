package com.kafka.tests.shopifyorderstests.controllers;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.kafka.tests.shopifyorderstests.daos.Order;

@RestController
@RequestMapping("/tests-orders-shopify")
public class TestsOrdersShopifyController {

	@GetMapping("/send-order")
	public Order sendOrder(@RequestBody Order order) {

		System.out.println("Pedido:");

		JsonParser parser = new JsonParser();
		JsonObject json = parser.parse(order).getAsJsonObject();

		Gson gson = new GsonBuilder().setPrettyPrinting().create();
		String prettyJson = gson.toJson(json);

		// System.out.println(order);
		return order;
	}

}
